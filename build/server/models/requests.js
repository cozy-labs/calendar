// Generated by CoffeeScript 1.9.0
var cozydb, tagsView;

<<<<<<< HEAD
americano = require('americano-cozy-pouchdb');
=======
cozydb = require('cozydb');
>>>>>>> 95d0785fad0c21a4f96bf50b6af6e224172f5c42

tagsView = {
  map: function(doc) {
    var _ref;
    return (_ref = doc.tags) != null ? typeof _ref.forEach === "function" ? _ref.forEach(function(tag, index) {
      var type;
      type = index === 0 ? 'calendar' : 'tag';
      return emit([type, tag], true);
    }) : void 0 : void 0;
  },
  reduce: function(key, values, rereduce) {
    return true;
  }
};

module.exports = {
  tag: {
    all: cozydb.defaultRequests.by('name')
  },
  alarm: {
    all: cozydb.defaultRequests.by('title'),
    byDate: function(doc) {
      return emit(new Date(doc.trigg), doc);
    },
    tags: tagsView
  },
  event: {
    all: cozydb.defaultRequests.all,
    byDate: function(doc) {
      return emit(new Date(doc.start), doc);
    },
    tags: tagsView,
    byCalendar: cozydb.defaultRequests.by('tags[0]')
  },
  contact: {
    all: cozydb.defaultRequests.all
  },
  webdavaccount: {
    all: cozydb.defaultRequests.all
  }
};
