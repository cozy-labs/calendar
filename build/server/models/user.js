<<<<<<< HEAD
// Generated by CoffeeScript 1.7.1
var User, americano, log, path;

americano = require('americano-cozy-pouchdb');

path = require('path');

log = require('printit')({
  prefix: 'Calendar'
});
=======
// Generated by CoffeeScript 1.9.0
var User, cozydb;

cozydb = require('cozydb');
>>>>>>> 95d0785fad0c21a4f96bf50b6af6e224172f5c42

module.exports = User = {};

<<<<<<< HEAD
User.all = function(callback) {
  return User.request("all", callback);
};

User.destroyAll = function(callback) {
  return User.requestDestroy("all", callback);
};

User.getTimezone = function(callback) {
  var configPath, err, user;
  configPath = path.join(process.cwd(), 'config');
  try {
    user = require(configPath);
  } catch (_error) {
    err = _error;
    console.log(err);
    log.error('No config file found at ' + configPath);
    user = {};
  }
  if (user.timezone == null) {
    user.timezone = "Europe/Paris";
  }
  return callback(null, user.timezone);
};

User.updateTimezone = function(callback) {
  return User.getTimezone(function(err, timezone) {
    User.timezone = timezone;
=======
User.updateUser = function(callback) {
  return cozydb.api.getCozyUser(function(err, user) {
    if (err || !user) {
      console.log(err);
      User.timezone = 'Europe/Paris';
      User.email = '';
    } else {
      User.timezone = user.timezone || "Europe/Paris";
      User.email = user.email;
    }
>>>>>>> 95d0785fad0c21a4f96bf50b6af6e224172f5c42
    return typeof callback === "function" ? callback() : void 0;
  });
};
