<<<<<<< HEAD
// Generated by CoffeeScript 1.7.1
var americano, clientPath, fs, path, publicPath, root, staticMiddleware;

americano = require('americano');

path = require('path');

fs = require('fs');

root = path.join(path.dirname(fs.realpathSync(__filename)));

clientPath = path.join(root, '..', 'client');

publicPath = path.join(clientPath, 'public');
=======
// Generated by CoffeeScript 1.9.0
var americano, publicPath, publicStatic, staticMiddleware;

americano = require('americano');

publicPath = __dirname + "/../client/public";
>>>>>>> 95d0785fad0c21a4f96bf50b6af6e224172f5c42

staticMiddleware = americano["static"](publicPath, {
  maxAge: 86400000
});

publicStatic = function(req, res, next) {
  var assetsMatched, detectAssets;
  detectAssets = /\/(stylesheets|javascripts|images|fonts)+\/(.+)$/;
  assetsMatched = detectAssets.exec(req.url);
  if (assetsMatched != null) {
    req.url = assetsMatched[0];
  }
  return staticMiddleware(req, res, function(err) {
    return next(err);
  });
};

module.exports = {
  common: {
    use: [
      staticMiddleware, publicStatic, americano.bodyParser({
        keepExtensions: true
      })
    ],
    afterStart: function(app, server) {
      return app.use(americano.errorHandler({
        dumpExceptions: true,
        showStack: true
      }));
    },
    set: {
<<<<<<< HEAD
      views: clientPath
=======
      views: './client'
    },
    engine: {
      js: function(path, locales, callback) {
        return callback(null, require(path)(locales));
      }
>>>>>>> 95d0785fad0c21a4f96bf50b6af6e224172f5c42
    }
  },
  development: [americano.logger('dev')],
  production: [americano.logger('short')],
<<<<<<< HEAD
  plugins: ['americano-cozy-pouchdb']
=======
  plugins: ['cozydb']
>>>>>>> 95d0785fad0c21a4f96bf50b6af6e224172f5c42
};
